<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calculateur_de_1</title>
  <style>
    canvas { display: block; }

    #downloadBtn {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: #28a745;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      display: none;
    }

    #downloadBtn:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

<canvas id="mainCanvas"></canvas>
<button id="downloadBtn" onclick="telecharger()">Télécharger l'exécutable calculateur_de_1.exe</button>

<script>
  const canvas = document.getElementById("mainCanvas");
  const ctx = canvas.getContext("2d");
  const bouton = document.getElementById("downloadBtn");

  // Adapter la taille du canvas à la fenêtre
  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  resizeCanvas();
  window.addEventListener("resize", resizeCanvas);

  // Afficher le bouton de téléchargement si desktop
  function isDesktop() {
    const ua = navigator.userAgent;
    return /Windows|Macintosh|Linux/.test(ua) && !/Mobi|Android|iPhone|iPad/.test(ua);
  }

  if (isDesktop()) {
    bouton.style.display = "block";
  }

  function telecharger() {
    window.location.href = "calculateur_de_1.exe"; // met ton lien réel ici
  }

  // Popup
  let popupOuvert = false;

  function ouvrirFenetre() {
    if (!popupOuvert) {
      const popup = window.open(
        "calculateur_de_1.html",
        "PopupCanvas",
        "width=235,height=218,left=200,top=100,resizable=no"
      );

      if (popup && !popup.closed) {
        popupOuvert = true;
      } else {
        popupOuvert = false;
        alert("Popup bloquée ! Autorisez les fenêtres pop-up dans votre navigateur.");
      }
    }
  }

  canvas.addEventListener("mouseenter", ouvrirFenetre);
  canvas.addEventListener("click", ouvrirFenetre);

  // Fond
  ctx.fillStyle = "#222";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
</script>

</body>
</html>
